<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Mitford Map</title>
        <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
        <link rel="stylesheet" type="text/css" href="webstyle.css" />
        <style>
        #map {
            height: 500px;
        }
    </style>
    </head>
    <body>
        <div class="title">
            <h1>Digital Mitford Project</h1>
            <h2>Analysis/Map</h2>
            <h3>Fall 2023</h3>
        </div>
        <nav>
            <ul>
                <li><a href="about.html">About</a></li>
                <li><a href="texts.html">Texts</a></li>
                <li><a class="active" href="map.html">Analysis</a></li>
                <li><a target="_blank" href="https://hadleighjae.github.io/stu2023_DM_Journal/mitfordODD.html">ODD</a></li>
                <li style="float:right"><a href="index.html">Home</a></li>
            </ul>
        </nav>
        
        <div id="map"></div>
        
        <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
        
        <script>
    var map = L.map('map').setView([51.509865, -0.118092], 5); // Centered at London, England

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&amp;copy; OpenStreetMap contributors'
    }).addTo(map);

    // Use an AJAX request to load the GeoJSON file
    fetch('mapData.geojson')
        .then(response => response.json())
        .then(geoJsonData => {
            console.log('GeoJSON Data:', geoJsonData); // Log GeoJSON data for debugging

            // Iterate through features and create circles using L.circle
            geoJsonData.features.forEach(feature => {
                var coordinates = feature.geometry.coordinates; 
                var count = feature.properties.count;

                // Create a circle with radius based on the "count" value
                var circle = L.circleMarker(coordinates, {
                    radius: count * 2, // Adjust the multiplier based on the desired scale
                    color: 'blue', // Circle color
                    fillOpacity: 0.5 // Opacity of the fill
                }).addTo(map);

                // Add a popup with information
                circle.bindPopup(`Place: ${feature.properties.placeName}<br/>Count: ${count}`);
            });
        });
</script>
        
        
    </body>
</html>